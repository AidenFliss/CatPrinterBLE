<Window x:Class="CatPrinterBLE.Gui.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Cat Printer BLE (MXW01)" 
        Height="650" Width="950"
        Background="{DynamicResource WindowBackgroundBrush}"
        Foreground="{DynamicResource TextBrush}">

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="140"/>
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Margin="5">
            <StackPanel Orientation="Vertical" Background="{DynamicResource PanelBackgroundBrush}">

                <TextBlock Text="Intensity (%)" Margin="5,10,5,2"/>
                <Slider x:Name="IntensitySlider" Value="50" Minimum="0" Maximum="100" TickFrequency="5" IsSnapToTickEnabled="False" Margin="5"/>
                <TextBlock Text="{Binding ElementName=IntensitySlider, Path=Value, StringFormat=Intensity: {0:F0}%}" Margin="5"/>

                <TextBlock Text="Print Mode" Margin="5,15,5,2"/>
                <ComboBox x:Name="PrintModeCombo" SelectedIndex="0" Margin="5">
                    <ComboBoxItem Content="1bpp (Black + White)"/>
                    <ComboBoxItem Content="4bpp (Grayscale)"/>
                </ComboBox>

                <Expander Header="Advanced Options" Margin="5,15,5,5">
                    <StackPanel>
                        <TextBlock Text="Dithering Method" Margin="5,5,5,2"/>
                        <ComboBox x:Name="DitheringCombo" SelectedIndex="4" Margin="5">
                            <ComboBoxItem Content="Bayer2x2"/>
                            <ComboBoxItem Content="Bayer4x4"/>
                            <ComboBoxItem Content="Bayer8x8"/>
                            <ComboBoxItem Content="Bayer16x16"/>
                            <ComboBoxItem Content="FloydSteinberg"/>
                        </ComboBox>

                        <CheckBox x:Name="FlipXCheckBox" Content="Flip Horizontal" Margin="5"/>
                        <CheckBox x:Name="FlipYCheckBox" Content="Flip Vertical" Margin="5"/>
                        <TextBlock Text="Rotate (°)" Margin="5,5,5,2"/>
                        <ComboBox x:Name="RotateComboBox" SelectedIndex="0" Margin="5">
                            <ComboBoxItem Content="0"/>
                            <ComboBoxItem Content="90"/>
                            <ComboBoxItem Content="180"/>
                            <ComboBoxItem Content="270"/>
                        </ComboBox>

                        <TextBlock Text="Crop (Left, Top, Right, Bottom px)" Margin="5,5,5,2"/>
                        <TextBox x:Name="CropTextBox" Text="0,0,0,0" Margin="5"/>
                    </StackPanel>
                </Expander>

                <Button x:Name="SelectImageButton" Content="Select Image..." Margin="5,15,5,5" Background="{DynamicResource ButtonBrush}" Foreground="White"/>
                <Button x:Name="PrintButton" Content="Print" Margin="5,15,5,5" Background="{DynamicResource ButtonBrush}" Foreground="White"/>

                <CheckBox x:Name="AccuratePreview" Content="Accurate Preview" Margin="5,10,5,5"/>

                <StackPanel Orientation="Horizontal" Margin="5,5,5,5">
                    <TextBlock Text="Background Color:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <ComboBox x:Name="BackgroundColorCombo" Width="120" SelectedIndex="0" Margin="0,0,5,0">
                        <ComboBoxItem Content="White"/>
                        <ComboBoxItem Content="Black"/>
                        <ComboBoxItem Content="Gray"/>
                        <ComboBoxItem Content="Red"/>
                        <ComboBoxItem Content="Green"/>
                        <ComboBoxItem Content="Blue"/>
                    </ComboBox>
                </StackPanel>

                <CheckBox x:Name="ThemeToggle" Content="Dark Mode" Margin="5,10,5,5"/>

            </StackPanel>
        </ScrollViewer>

        <Border Grid.Column="1" Grid.Row="0" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" Margin="10">
            <ScrollViewer x:Name="PreviewScroll" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" PanningMode="Both" CanContentScroll="True">
                <Grid>
                    <TextBlock x:Name="PreviewPlaceholder"
                               Text="Select Image to Preview and Print"
                               HorizontalAlignment="Center" VerticalAlignment="Center"
                               Foreground="{DynamicResource TextBrush}" FontSize="18"/>
                    <Image x:Name="PreviewImage" Width="384" Stretch="Uniform" Visibility="Collapsed" RenderTransformOrigin="0.5,0.5">
                        <Image.RenderTransform>
                            <ScaleTransform x:Name="PreviewZoom" ScaleX="1" ScaleY="1"/>
                        </Image.RenderTransform>
                    </Image>
                </Grid>
            </ScrollViewer>
        </Border>

        <Border Grid.Column="0" Grid.Row="1" Margin="5" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
            <TextBox x:Name="LogBox"
                     TextWrapping="Wrap"
                     VerticalScrollBarVisibility="Auto"
                     IsReadOnly="True"
                     Background="Black"
                     Foreground="Lime"
                     FontFamily="Consolas"
                     FontSize="12"/>
        </Border>
    </Grid>
</Window>
